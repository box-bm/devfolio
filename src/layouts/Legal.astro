---
import { getLangFromLegalUrl } from "@i18n/utils";
import Base from "@layouts/Base.astro";
import Footer from "@components/Footer.astro";
import BreadCrumb from "@components/BreadCrumb.astro";
import "@styles/LegalStyles.astro";

const lang = getLangFromLegalUrl(Astro.url);

interface Props {
  title?: string;
  description?: string;
}

const url = new URL(Astro.url);
const routes = url.pathname.split("/").filter(Boolean);

const { title = "Legal Information", description } = Astro.props;
---

<Base title={title} description={description} lang={lang} type="article">
  <header>
    <BreadCrumb
      items={routes.map((segment, index) => {
        const href = "/" + routes.slice(0, index + 1).join("/");
        const isLast = index === routes.length - 1;
        return {
          label: segment.replace("-", " "),
          href: isLast ? undefined : href,
        };
      })}
    />
  </header>
  <main>
    <slot />
  </main>
  <Footer lang={lang} />
</Base>
