---
import { getLangFromLegalUrl } from "@i18n/utils";
import Base from "@layouts/Base.astro";
import Footer from "@components/Footer.astro";
import BreadCrumb from "@components/BreadCrumb.astro";

const lang = getLangFromLegalUrl(Astro.url);

interface Props {
  title?: string;
}

const url = new URL(Astro.url);
const routes = url.pathname.split("/").filter(Boolean);

const { title = "Legal Information" } = Astro.props;
---

<Base title={title} lang={lang}>
  <header>
    <BreadCrumb
      items={routes.map((segment, index) => {
        const href = "/" + routes.slice(0, index + 1).join("/");
        const isLast = index === routes.length - 1;
        return {
          label: segment.charAt(0).toUpperCase() + segment.slice(1),
          href: isLast ? undefined : href,
        };
      })}
    />
  </header>
  <main>
    <slot />
  </main>
  <Footer />
</Base>

<style>
  header {
    padding: 1rem;
  }

  main {
    overflow-y: auto;
    padding: 1rem;
    flex-grow: 1;
  }

  h1 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }
</style>
